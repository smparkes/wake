# Run me with:
#
#   $ wake gem.wk

# --------------------------------------------------
# Convenience Methods
# --------------------------------------------------
def build(gemspec)
  system "gem build %s" % gemspec
  FileUtils.mv Dir['wake-*.gem'], 'pkg/'
  puts
end

# --------------------------------------------------
# Wake Rules
# --------------------------------------------------
watch( '^wake.gemspec$' ) { |m| build m[0] }

# --------------------------------------------------
# Signal Handling
# --------------------------------------------------
# Ctrl-\
Signal.trap('QUIT') do
  puts " --- Building Gem ---\n\n"
  build 'wake.gemspec'
end

# Ctrl-C
Signal.trap('INT') { abort("\n") }


# vim:ft=ruby
